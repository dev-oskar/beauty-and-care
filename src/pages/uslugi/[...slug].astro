---
/**
 * Redirect from old /uslugi/[slug] path to new /zabiegi/[slug] path
 */

export async function getStaticPaths() {
  // Import from astro:content
  const { getCollection } = await import('astro:content');
  
  // Get all services (non-draft)
  const services = await getCollection("services", (service) => !service.draft);
  
  // Create paths for each service
  return services.map((service) => ({
    params: { slug: service.slug },
  }));
}

// Get the current slug
const { slug } = Astro.params;
const newUrl = `/zabiegi/${slug}`;
---

<meta http-equiv="refresh" content={`0;url=${newUrl}`} />

<script define:vars={{ newUrl }}>
  // JavaScript redirect as a fallback
  window.location.href = newUrl;
</script>

<body>
  <p>Redirecting to <a href={newUrl}>new location</a>...</p>
</body>