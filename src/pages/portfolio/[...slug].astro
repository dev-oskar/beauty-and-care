---
// Redirect from portfolio pages to blog pages
export const prerender = true;

import { getCollection } from "astro:content";

export async function getStaticPaths() {
  // Get all posts
  const posts = await getCollection("posts", ({ data }) => !data.draft);
  
  // Add a path for the index page
  const paths = [{ params: { slug: undefined } }];
  
  // Add paths for each post
  for (const post of posts) {
    paths.push({ params: { slug: post.slug } });
  }
  
  return paths;
}

const { slug } = Astro.params;
---

<meta http-equiv="refresh" content={`0;url=/blog${slug ? '/' + slug : ''}`} />
<script>
  window.location.href = `/blog${slug ? '/' + slug : ''}`;
</script>